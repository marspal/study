#### 中断和中断向量

> 中断概念:

当外界发生变化时, 通过中断通知CPU应该去注意某个信号(事件)，这个时候，CPU当前执行程序或被中断, 当前执行状态会被保存，中断响应程序会被执行 


> 中断的响应过程

硬件、软件 -(中断请求IRQ)-> CPU
CPU -查询-> 中断向量表(IVT)
CPU -中断向量(IRV)->中断响应路径(ISR)-(接管)->OS->写入中断向量表

- OS加载时 写入中断向量表
- 产生中断请求、发送给CPU
- 查询中断向量表确定中断向量
- 根据中断向量定位中断响应程序 
- OS接管中断

> 中断请求

- 硬件设备发给主板(打印机、键盘、鼠标等) 
- 硬件中断: CPU异常(除以0)，时钟信号等
- 软件中断: 发出（异常、切换到内核态等）

> 中断向量表
- 一般在内存中的一块区域，存储了中断类型和中断响应程序的对应关系，每一行叫做一个中断向量

|  中断类型   | ISR地址  | 描述 |
|  ----      | ----  | ----|
| 00         | 0x0000 |  除以0|
| 01         |  0x0004 | 单步|
| 09         |  0x00024 | 键盘 
| 18         | 0x0048 | 打印机|
| 100         |  0x0190 | 自定义|

> 中断意义
- 提高工作效率
- 故障恢复
- 简化编程模型

> Q/A ?
- 32位机器上的中断响应路径ISR只有四个字节，怎么实现复杂的程序？
- 按键程序中断响应路径到操作系统再到应用，但是到底哪些建被按了，怎么知道？
- 中断响应后，如何恢复到中断执行前的状态
- 既然出错了？为什么不直接调转到错误的处理位置